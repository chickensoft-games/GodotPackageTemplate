name: 'ðŸ“¦ Publish to Nuget'
on:
  workflow_dispatch:

jobs:
  publish:
    name: 'ðŸ“¦ Publish to Nuget'
    runs-on: ubuntu-latest
    steps:
      - name: 'ðŸ§¾ Checkout'
        uses: actions/checkout@v3
        with:
          submodules: 'recursive'
          token: ${{ secrets.GH_BASIC }}

      - uses: actions/setup-dotnet@v3
        name: ðŸ’½ Setup .NET SDK
        with:
          global-json-file: src/global.json
      
      - name: ðŸ“¦ Publish
        id: publish_nuget
        uses: brandedoutcast/publish-nuget@v2
        with:
          PROJECT_FILE_PATH: Chickensoft.GodotPackageTemplate.csproj
          NUGET_KEY: ${{ secrets.NUGET_API_KEY }}
